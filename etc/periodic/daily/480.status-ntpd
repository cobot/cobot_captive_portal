#!/bin/sh
#
# $FreeBSD: src/etc/periodic/daily/480.status-ntpd,v 1.1.12.1.8.2 2012/11/17 08:24:38 svnexp Exp $
#

# If there is a global system configuration file, suck it in.
#
if [ -r /etc/defaults/periodic.conf ]
then
    . /etc/defaults/periodic.conf
    source_periodic_confs
fi

rc=0

case "$daily_status_ntpd_enable" in
    [Yy][Ee][Ss])
	echo ""
	echo "NTP status:"

	synchronized=$(ntpq -p | tee /dev/stderr | grep '^\*')
	if [ -z "$synchronized" ]; then
		rc=1
	fi
	;;
esac

exit $rc
